---
# Create accounts
- name: Create ECC256 account
  local_action:
    module: acme_account
    acme_version: 2
    acme_directory: https://localhost:{{ pebble_port }}/dir
    validate_certs: no
    account_key_src: "{{ output_dir }}/account-ec256.pem"
    state: present
    allow_creation: yes
    terms_agreed: yes
    contact:
    - mailto:example@example.org
- name: Create ECC384 account
  local_action:
    module: acme_account
    acme_version: 2
    acme_directory: https://localhost:{{ pebble_port }}/dir
    validate_certs: no
    account_key_src: "{{ output_dir }}/account-ec384.pem"
    state: present
    allow_creation: yes
    terms_agreed: yes
    contact:
    - mailto:example@example.org
    - mailto:example@example.com
- name: Create RSA-2048 account
  local_action:
    module: acme_account
    acme_version: 2
    acme_directory: https://localhost:{{ pebble_port }}/dir
    validate_certs: no
    account_key_src: "{{ output_dir }}/account-rsa2048.pem"
    state: present
    allow_creation: yes
    terms_agreed: yes
    contact: []
